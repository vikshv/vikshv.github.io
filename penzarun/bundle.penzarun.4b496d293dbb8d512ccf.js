webpackJsonp([0],Array(129).concat([function(e,t){},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(397),s=n(468);t.a=r.a.module("app.components",[a.a.name,s.a.name])},function(e,t,n){"use strict";var i=n(1),r=n.n(i);t.a=r.a.module("app.directives",[])},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(488),s=n(492),o=n(496),l=n(494),c=n(500),d=n(502),u=n(498),v=n(490),f=n(506),p=n(504);t.a=r.a.module("app.services",[a.a.name,s.a.name,o.a.name,l.a.name,c.a.name,d.a.name,u.a.name,v.a,f.a,p.a.name])},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){e.exports='<div class=eventsList> <div class=eventsList__event ng-repeat="event in $ctrl.events"> <div class=event__title> <div class=event__date> {{ event.date | date: \'d MMMM yyyy\' }} </div> <div class="well well-lg well--event"> <h4><a ui-sref="events.card({ id: event.id })"> {{ event.title }} </a></h4> <p>{{ event.abstract }}</p> <p>Дистанция: <span class=event__distances>{{ event.distances }}</span></p> </div> </div> </div> <div class=eventsList__empty ng-if=!$ctrl.events.length> <div class="alert alert-warning"> <strong>{{ $ctrl.emptyListMessage || \'Нет данных\' }}</strong> </div> </div> </div> '},function(e,t){e.exports='<div class=footer> <div class=container> <div class=row> <div class="col-md-3 col-sm-4 col-xs-6"> <div class=""> <p>Мы в социальных сетях:</p> <ul class=list-inline> <li> <a target=_blank href=https://vk.com/penzarun title="В контакте" rel=nofollow> <i class="fa fa-2x fa-vk" aria-hidden=true></i> </a> </li> </ul> </div> </div> <div class="col-md-3 col-sm-4 col-xs-6"> <div class=footer__contacts> <p>Контакты:</p> <address class=footer__address> <abbr title=Телефон>Тел:</abbr> 8-909-319-63-54<br> <abbr title="Электронная почта">Эл. почта:</abbr> <a href=mailto:#>vikshv@yandex.ru</a> </address> </div> </div> </div> <div class=row> <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class=footer__centerBlock> &copy; Бег в Пензе · Автор и разработчик <a href=https://vk.com/vikshv>Виктор&nbsp;Швецов</a> </div> </div> </div> <div class=row> <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class=footer__centerBlock> Style based on <a target=_blank href=http://bootswatch.com/superhero/ rel=nofollow>Bootswatch</a> · Icons from <a target=_blank href=http://fortawesome.github.io/Font-Awesome/ rel=nofollow>Font Awesome</a> · Backend from <a target=_blank href=https://console.firebase.google.com/project/project-5043437142388192252/overview rel=nofollow>Firebase</a> </div> </div> </div> <div class=row> <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"> <div class=footer__centerBlock> <a href=https://github.com/vikshv/penzarun>GitHub Project</a> · <a href=https://github.com/vikshv/penzarun/issues>Issues</a> <span ng-if=$ctrl.visitors> · Просмотры: сегодня <span class=badge>{{ $ctrl.visitors.current }}</span>, всего <span class=badge>{{ $ctrl.visitors.total }}</span> </span> </div> </div> </div> </div> </div> '},function(e,t){e.exports='<nav class="navbar navbar-inverse navbar-fixed-top"> <div class=container> <div class=navbar-header> <button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#navbar aria-expanded=false aria-controls=navbar> <span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span> </button> <a class=navbar-brand ui-sref=home>Бег в Пензе</a> </div> <div id=navbar class="navbar-collapse collapse"> <ul class="nav navbar-nav"> <li ng-class="{ active: $ctrl.state.news }"><a ui-sref=news.list>НОВОСТИ</a></li> <li ng-class="{ active: $ctrl.state.calendar }"><a ui-sref=calendar>КАЛЕНДАРЬ</a></li> <li ng-class="{ active: $ctrl.state.events }"><a ui-sref=events.list>СОБЫТИЯ</a></li> <li ng-class="{ active: $ctrl.state.about }"><a ui-sref=about>О ПРОЕКТЕ</a></li> </ul> <ul class="nav navbar-nav navbar-right"> <li ng-if=!$ctrl.auth ng-class="{ active: $ctrl.state.login }"> <a ui-sref=login> <i class="fa fa-sign-in" aria-hidden=true></i> ВХОД </a> </li> <li ng-class="{ active: $ctrl.state.user }" ng-if=$ctrl.auth> <a ui-sref=user> <i class="fa fa-user" aria-hidden=true></i> </a> </li> <li ng-if=$ctrl.auth> <a href=# ng-click=$ctrl.logout()> <i class="fa fa-sign-out" aria-hidden=true></i> ВЫХОД </a> </li> </ul> </div> </div> </nav> '},function(e,t){e.exports='<div class=spinerContainer> <i class="fa fa-circle-o-notch fa-spin fa-4x fa-fw"></i><br><span>{{ $ctrl.text }}</span> </div> '},function(e,t){e.exports='<div class=uploadFileButton> <input type=file class=uploadFileButton__file file=$ctrl.uploadFile> <button class="btn btn-primary uploadFileButton__button" type=button> <i class="fa fa-file-text-o" aria-hidden=true></i> </button> </div> '},function(e,t){e.exports='<div class="page page--about"> <div class=container> <div class=row> <div class="col-md-8 col-sm-12"> <div class=about__block> <p class="lead text-warning">Цели и задачи</p> <p><span class="">Бег в Пензе</span> - сайт и одноимённое сообщество <a href=https://vk.com/penzarun target=_blank>ВКонтакте</a>, целью которых является информирование профессионалов и любителей бега о спортивных легкоатлетических событиях города Пенза и Пензенской бласти. А также площадка для организации совместных пробегов, тренировок, поездок на спортивные мероприятия в другие регионы России и мира.</p> </div> <div class=about__block> <p class="lead text-warning">Возможности сайта</p> <ul> <li>Новости из мира профессионального и любительского бега Пензы и области</li> <li>Календарь запланированных спортивных событий, пробегов, марафонов и тренировок</li> <li>Подробная информация о спортивных событиях</li> <li>Предварительная регистрация на пробег, марафон или тренировку - <em>в разработке</em></li> </ul> </div> <div class=about__block> <p class="lead text-warning">Организаторы пробегов</p> <div class=row> <div class="col-md-6 col-sm-6"> <address> <strong>Общество спорта "Марафон"</strong><br> г. Пенза, 440058<br> ул.Тепличная, 17-127<br> Акжигитов Фярит Исхакович<br> <abbr title=Телефон>Тел:</abbr> (8412) 93-85-56<br> <abbr title="Мобильный телефон">Моб:</abbr> 8-905-016-48-97<br> <abbr title="Электронная почта">Эл. почта:</abbr> <a href=mailto:#>marafon-penza@yandex.ru</a> </address> </div> <div class="col-md-6 col-sm-6"> <address> <strong>Сообщество любителей бега "Бег в Пензе"</strong><br> Швецов Виктор Владимирович<br> Группа ВКонтакте: <a target=_blank rel=nofollow href=https://vk.com/penzarun>vk.com/penzarun</a><br> <abbr title="Мобильный телефон">Моб:</abbr> 8-909-319-63-54<br> <abbr title="Электронная почта">Эл. почта:</abbr> <a href=mailto:#>vikshv@yandex.ru</a> </address> </div> </div> </div> </div> </div> <div> </div> </div></div>'},function(e,t){e.exports='<div class=calendarDatepicker> <div uib-datepicker class="well well-sm" ng-model=$ctrl.date datepicker-options=$ctrl.options template-url=calendarDatepicker/templates/datepicker.html></div> </div> '},function(e,t){e.exports="<div ng-switch=datepickerMode> <div uib-daypicker ng-switch-when=day tabindex=0 class=uib-daypicker template-url=calendarDatepicker/templates/day.html></div> <div uib-monthpicker ng-switch-when=month tabindex=0 class=uib-monthpicker></div> <div uib-yearpicker ng-switch-when=year tabindex=0 class=uib-yearpicker></div> </div> "},function(e,t){e.exports='<table role=grid aria-labelledby={{::uniqueId}}-title aria-activedescendant={{activeDateId}}> <thead> <tr> <th><button type=button class="btn btn-default btn-sm pull-left uib-left" ng-click=move(-1) tabindex=-1><i class="glyphicon glyphicon-chevron-left"></i></button></th> <th colspan="{{::5 + showWeeks}}"><button id={{::uniqueId}}-title role=heading aria-live=assertive aria-atomic=true type=button class="btn btn-default btn-sm uib-title" ng-click=toggleMode() ng-disabled="datepickerMode === maxMode" tabindex=-1><strong>{{title}}</strong></button></th> <th><button type=button class="btn btn-default btn-sm pull-right uib-right" ng-click=move(1) tabindex=-1><i class="glyphicon glyphicon-chevron-right"></i></button></th> </tr> <tr> <th ng-if=showWeeks class=text-center></th> <th ng-repeat="label in ::labels track by $index" class=text-center><span aria-label={{::label.full}}>{{::label.abbr}}</span></th> </tr> </thead> <tbody> <tr class=uib-weeks ng-repeat="row in rows track by $index"> <td ng-if=showWeeks class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td> <td ng-repeat="dt in row" class="uib-day text-center" role=gridcell id={{::dt.uid}} ng-class=::dt.customClass> <button type=button class="btn btn-default btn-sm" uib-is-class="\r\n            \'btn-primary\' for selectedDt,\r\n            \'active\' for activeDt\r\n            on dt" ng-click=select(dt.date) ng-disabled=::dt.disabled tabindex=-1><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button> </td> </tr> </tbody> </table> '},function(e,t){e.exports='<div class="page page--calendar"> <div class=container> <div class=row> <div class=col-md-12> <div class=pageCalendar__nav> <ul class="nav nav-pills"> <li role=presentation ng-class="{ active: $ctrl.filterIs(\'events\') }"> <a ui-sref="calendar({ filter: \'events\'})">СОБЫТИЯ</a> </li> <li role=presentation ng-class="{ active: $ctrl.filterIs(\'probegs\') }"> <a ui-sref="calendar({ filter: \'probegs\'})">ПРОБЕГИ</a> </li> <li role=presentation ng-class="{ active: $ctrl.filterIs(\'marathons\') }"> <a ui-sref="calendar({ filter: \'marathons\'})">МАРАФОНЫ</a> </li> <li role=presentation ng-class="{ active: $ctrl.filterIs(\'trainings\') }"> <a ui-sref="calendar({ filter: \'trainings\'})">ТРЕНИРОВКИ</a> </li> </ul> </div> </div> </div> <div class=row> <div class=col-md-10> <div class=pageCalendar__datepickers> <div class="well well-lg well--datepickers"> <calendar-datepicker date=$ctrl.dateBegin options=$ctrl.beginDatepickerOptions on-change=$ctrl.onChangeDateBegin(date)></calendar-datepicker> <calendar-datepicker date=$ctrl.dateEnd options=$ctrl.endDatepickerOptions on-change=$ctrl.onChangeDateEnd(date)></calendar-datepicker> </div> </div> </div> </div> <div class=row> <div class="col-md-10 col-sm-12 col-xs-12"> <div class=pageCalendar__eventList> <progress-bar text="Загрузка списка событий..." ng-if=$ctrl.loadProgress></progress-bar> <events-list events=$ctrl.getEvents() empty-list-message="Ничего не найдено" ng-if=!$ctrl.loadProgress></events-list> </div> </div> </div> </div> </div> '},function(e,t){e.exports='<div class=eventCard__body> <div class=container> <div class=row> <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12 leftBlock"> <div class=eventCard__description ng-if=$ctrl.event.description ng-bind-html=$ctrl.getDescriptionHtml()></div> <div class="verticalLine hidden-sm hidden-xs"></div> </div> <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12 rightBlock"> <div class="rightBlock__margin--top hidden-lg hidden-md"></div> <div class=rightBlock__buttons> <a class="btn btn-default btn-lg btn-block btn--overflow" ng-href="{{ $ctrl.provisionFileUrl }}" ng-if=$ctrl.provisionFileUrl> <i class="fa fa-download" aria-hidden=true></i> Положение ({{ $ctrl.getFileSize($ctrl.provisionFileSize) }}) </a> <a class="btn btn-default btn-lg btn-block btn--overflow" ng-href="{{ $ctrl.protocolFileUrl }}" ng-if=$ctrl.protocolFileUrl> <i class="fa fa-download" aria-hidden=true></i> Протокол ({{ $ctrl.getFileSize($ctrl.protocolFileSize) }}) </a> <a class="btn btn-info btn-lg btn-block btn--overflow" ng-if=$ctrl.startlistLength ui-sref="events.startlist({ id: $ctrl.event.id })"> Список участников ({{ $ctrl.startlistLength }}) </a> </div> <div class=rightBlock__address> <h4 class=address__title>Контакты</h4> <address> <div> <strong>{{ $ctrl.event.master }}</strong> </div> <div ng-if=$ctrl.event.masterUrl> <abbr title="Адрес в сети Интернет">www:</abbr> <a target=_blank rel=nofollow ng-href="http://www.{{ $ctrl.event.masterUrl }}">{{ $ctrl.event.masterUrl }}</a> </div> </address> <address ng-if=$ctrl.event.masterPerson> <div> <strong>{{ $ctrl.event.masterPerson }}</strong> </div> <div ng-if=$ctrl.event.masterPhone> <abbr title=Телефон>Тел:</abbr> {{ $ctrl.event.masterPhone }} </div> <div ng-if=$ctrl.event.masterEmail> <abbr title="Электронная почта">Эл. почта:</abbr> <a href=mailto:#>{{ $ctrl.event.masterEmail }}</a> </div> </address> </div> </div> </div> <div class=row ng-if=$ctrl.slides> <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12"> <div id=vk_gallery class=gallery> <div class=page-header> <h4>Галерея фотографий</h4> </div> <div uib-carousel active=0> <div uib-slide ng-repeat="slide in $ctrl.slides" index=slide.id> <img ng-src="{{ slide.image }}"> <div class=carousel-caption> <p>{{ slide.text }}</p> </div> </div> </div> </div> </div> </div> </div> </div> '},function(e,t){e.exports='<div class=eventCard__footer> <div class=container> <div class=row> <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12"> <div class=btn-toolbar role=toolbar> <div class=btn-group role=group ng-if=$ctrl.isRegisterEnabled()> <a class="btn btn-lg btn-primary" ui-sref="events.register({ id: $ctrl.event.id })">Регистрация</a> </div> <div class=btn-group role=group ng-if=$ctrl.rules.write> <a class="btn btn-lg btn-default" ui-sref="events.edit({ id: $ctrl.event.id })">Редактировать</a> </div> </div> </div> </div> </div> </div> '},function(e,t){e.exports='<div class=eventCard__header> <div class=container> <div class=row> <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12"> <div class=eventCard__jumbotron> <div class=eventCard__title> {{ $ctrl.event.title }} </div> <div class=eventCard__abstract>{{ $ctrl.event.abstract }}</div> </div> </div> </div> </div> <div class=eventHeader__info> <div class=info__title> <div class=container> <div class=row> <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4"> Дата и время события </div> <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4"> Место проведения </div> <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4"> Организаторы </div> </div> </div> </div> <div class=info__division></div> <div class=info__content> <div class=container> <div class=row> <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12 col--date"> <h4 class=content__item> {{ $ctrl.event.date | date: \'EEEE, d MMMM yyyy\' }}, {{ $ctrl.event.time }} </h4> </div> <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12 col--place"> <h4 class=content__item> {{ $ctrl.event.place }} </h4> </div> <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12 col--master"> <h4 class=content__item> {{ $ctrl.event.master }} </h4> </div> </div> </div> </div> </div> </div> '},function(e,t){e.exports='<progress-bar text="Загрузка события..." ng-if=$ctrl.loadProgress></progress-bar> <div class="page page--eventCard eventCard--{{ $ctrl.event.tag }}" ng-if=!$ctrl.loadProgress> <event-card-header event=$ctrl.event></event-card-header> <event-card-body event=$ctrl.event provision-file-url=$ctrl.provisionFileUrl provision-file-size=$ctrl.provisionFileSize protocol-file-url=$ctrl.protocolFileUrl protocol-file-size=$ctrl.protocolFileSize startlist-length=$ctrl.startlistLength></event-card-body> <event-card-footer event=$ctrl.event></event-card-footer> <div class=container> <div class=row> <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12"> <div id=vk_comments class=comments></div> </div> </div> </div> </div> '},function(e,t){e.exports=' <progress-bar text="Загрузка события..." ng-if=$ctrl.loadProgress></progress-bar> <div class="page page--eventForm" ng-hide=$ctrl.loadProgress> <div class=container> <div class=row> <div class=col-md-12> <div class="well well--form"> <form name=event class=form-horizontal ng-submit=$ctrl.submit()> <fieldset> <legend>{{ $ctrl.id ? \'Редактирование события\' : \'Добавление нового события\' }}</legend> <div class=form-group ng-class="{ \'has-error\' : $ctrl.isHasError(\'title\') }"> <label for=title class="col-md-2 control-label">Заголовок</label> <div class=col-md-8> <input type=text class=form-control id=title name=title required ng-model=$ctrl.event.title ng-disabled=$ctrl.disabledForm autocomplete=off> <div ng-messages=event.title.$error ng-if="$ctrl.isHasError(\'title\')" role=alert> <div ng-message=required class=form__message--error>Введите заголовок</div> </div> </div> </div> <div class=form-group ng-class="{ \'has-error\' : $ctrl.isHasError(\'date\') }"> <label for=date class="col-md-2 control-label">Дата события</label> <div class=col-md-4> <div class=input-group> <input type=text id=date name=date required class=form-control autocomplete=off uib-datepicker-popup="{{ $ctrl.dateFormat }}" ng-model=$ctrl.event.date is-open=$ctrl.datePopupIsOpen show-button-bar=false on-open-focus=true> <span class=input-group-btn> <button class="btn btn-primary" type=button ng-click=$ctrl.openDatePopup()> <i class="fa fa-calendar" aria-hidden=true></i> </button> </span> </div> <div ng-messages=event.date.$error ng-if="$ctrl.isHasError(\'date\')" role=alert> <div ng-message=required class=form__message--error>Введите дату события</div> </div> </div> </div> <div class=form-group ng-class="{ \'has-error\' : $ctrl.isHasError(\'time\') }"> <label for=time class="col-md-2 control-label">Время начала</label> <div class=col-md-4> <input type=text class=form-control id=time name=time required placeholder=11:00 ng-model=$ctrl.event.time ng-disabled=$ctrl.disabledForm autocomplete=off> <div ng-messages=event.time.$error ng-if="$ctrl.isHasError(\'time\')" role=alert> <div ng-message=required class=form__message--error>Введите время начала события</div> </div> </div> </div> <div class=form-group> <label for=place class="col-md-2 control-label">Место проведения</label> <div class=col-md-4> <input type=text class=form-control id=place name=place placeholder="г. Пенза, Олимпийская аллея" ng-model=$ctrl.event.place ng-disabled=$ctrl.disabledForm autocomplete=off> </div> </div> <div class=form-group> <label for=distances class="col-md-2 control-label">Дистанции</label> <div class=col-md-4> <input type=text class=form-control id=distances name=distances placeholder="1 км, 3 км, 5 км, 10 км, полумарафон, марафон" ng-model=$ctrl.event.distances ng-disabled=$ctrl.disabledForm autocomplete=off> </div> </div> <div class=form-group> <label for=tag class="col-md-2 control-label">Теги</label> <div class=col-md-8> <label class=radio-inline> <input type=radio name=tag id=inlineRadio1 value=event ng-model=$ctrl.event.tag> <span class="label label-default label--md">Событие</span> </label> <label class=radio-inline> <input type=radio name=tag id=inlineRadio1 value=probeg ng-model=$ctrl.event.tag> <span class="label label-warning label--md">Пробег</span> </label> <label class=radio-inline> <input type=radio name=tag id=inlineRadio2 value=marathon ng-model=$ctrl.event.tag> <span class="label label-danger label--md">Марафон</span> </label> <label class=radio-inline> <input type=radio name=tag id=inlineRadio3 value=training ng-model=$ctrl.event.tag> <span class="label label-success label--md">Тренировка</span> </label> </div> </div> <div class=form-group></div> <div class=form-group ng-class="{ \'has-error\' : $ctrl.isHasError(\'master\') }"> <label for=master class="col-md-2 control-label">Организаторы</label> <div class=col-md-8> <input type=text class=form-control id=master name=master placeholder="Сообщество &ldquo;Бег в Пензе&rdquo;" required ng-model=$ctrl.event.master ng-disabled=$ctrl.disabledForm> <div ng-messages=event.master.$error ng-if="$ctrl.isHasError(\'master\')" role=alert> <div ng-message=required class=form__message--error>Укажите организаторов</div> </div> </div> </div> <div class=form-group> <label for=masterUrl class="col-md-2 control-label">Сайт организаторов</label> <div class=col-md-4> <div class=input-group> <span class=input-group-addon>www</span> <input type=text class=form-control id=masterUrl name=masterUrl ng-model=$ctrl.event.masterUrl ng-disabled=$ctrl.disabledForm> </div> </div> </div> <div class=form-group> <label for=masterPerson class="col-md-2 control-label">Контактное лицо</label> <div class=col-md-4> <input type=text class=form-control id=masterPerson name=masterPerson ng-model=$ctrl.event.masterPerson ng-disabled=$ctrl.disabledForm> </div> </div> <div class=form-group> <label for=masterPhone class="col-md-2 control-label">Телефон</label> <div class=col-md-4> <input type=text class=form-control id=masterPhone name=masterPhone ng-model=$ctrl.event.masterPhone ng-disabled=$ctrl.disabledForm> </div> </div> <div class=form-group> <label for=masterEmail class="col-md-2 control-label">Адрес эл. почты</label> <div class=col-md-4> <input type=text class=form-control id=masterEmail name=masterEmail placeholder=info@penzarun.ru ng-model=$ctrl.event.masterEmail ng-disabled=$ctrl.disabledForm> </div> </div> <div class=form-group></div> <div class=form-group> <label for=abstract class="col-md-2 control-label">Краткое описание</label> <div class=col-md-8> <textarea class=form-control id=abstract name=abstract rows=2 ng-model=$ctrl.event.abstract ng-disabled=$ctrl.disabledForm autocomplete=off></textarea> </div> </div> <div class=form-group> <label for=description class="col-md-2 control-label">Подробное описание</label> <div class=col-md-8> <div ckeditor=$ctrl.ckeditorOptions id=eventDescription ng-model=$ctrl.event.description></div> </div> </div> <div class=form-group> <label for=provisionFile class="col-md-2 control-label">Положение</label> <div class=col-md-8> <div class=input-group> <input type=text class=form-control id=provisionFile readonly=readonly ng-value=$ctrl.provisionFile.name> <span class=input-group-btn> <upload-file-button upload-file=$ctrl.provisionFile></upload-file-button> </span> <span class=input-group-btn> <button class="btn btn-danger" type=button ng-click=$ctrl.removeProvision() ng-disabled=!$ctrl.provisionFile.name> <i class="fa fa-times" aria-hidden=true></i> </button> </span> </div> </div> </div> <div class=form-group> <label for=protocolFile class="col-md-2 control-label">Протокол</label> <div class=col-md-8> <div class=input-group> <input type=text class=form-control id=protocolFile readonly=readonly ng-value=$ctrl.protocolFile.name> <span class=input-group-btn> <upload-file-button upload-file=$ctrl.protocolFile></upload-file-button> </span> <span class=input-group-btn> <button class="btn btn-danger" type=button ng-click=$ctrl.removeProtocol() ng-disabled=!$ctrl.protocolFile.name> <i class="fa fa-times" aria-hidden=true></i> </button> </span> </div> </div> </div> <div class=form-group> <label for=vkPhotoGallery class="col-md-2 control-label">Альбом ВК</label> <div class=col-md-4> <input type=text class=form-control id=vkPhotoGallery name=vkAlbumPhotoId ng-model=$ctrl.event.vkAlbumPhotoId ng-disabled=$ctrl.disabledForm> </div> </div> <div class=form-group></div> <div class=form-group> <div class="col-md-8 col-md-offset-2"> <button type=submit class="btn btn-primary" ng-disabled="event.$invalid || $ctrl.disabledForm"> <i class="fa fa-lg fa-spinner fa-spin" ng-if=$ctrl.saveProgress></i> Сохранить </button> <button type=button class="btn btn-danger" ng-if=$ctrl.id ng-click=$ctrl.onClickRemoveButton() ng-disabled=$ctrl.disabledForm> <i class="fa fa-lg fa-spinner fa-spin" ng-if=$ctrl.removeProgress></i> Удалить </button> <button type=button class="btn btn-default" ng-click=$ctrl.onClickCancelButton() ng-disabled=$ctrl.disabledForm>Отмена</button> </div> </div> </fieldset> </form> </div> </div> </div> </div> </div> '},function(e,t){e.exports=' <progress-bar text="Загрузка информации о событии..." ng-if=$ctrl.progress></progress-bar> <div class="page page--eventRegister"> <div class=container ng-hide=$ctrl.progress> <div class=row> <div class=col-md-12> <div class="well well--form"> <form name=member class=form-horizontal ng-submit=$ctrl.submit()> <fieldset> <legend>Регистрация</legend> <div class=form-group> <label for=place class="col-md-2 control-label">Событие</label> <div class=col-md-8> <p class="form-control-static form-control-static--event"> {{ $ctrl.event.title }} </p> </div> </div> <div class=form-group> <label for=place class="col-md-2 control-label">Дата и время</label> <div class=col-md-4> <p class="form-control-static form-control-static--event"> {{ $ctrl.event.date | date: \'EEEE, d MMMM yyyy\' }}, {{ $ctrl.event.time }} </p> </div> </div> <div class=form-group> <label for=place class="col-md-2 control-label">Место проведения</label> <div class=col-md-4> <p class="form-control-static form-control-static--event"> {{ $ctrl.event.place }} </p> </div> </div> <div class=form-group> <label for=place class="col-md-2 control-label">Дистанции</label> <div class=col-md-4> <p class="form-control-static form-control-static--event"> {{ $ctrl.event.distances }} </p> </div> </div> <div class=form-group ng-class="{ \'has-error\' : $ctrl.isHasError(\'fio\') }"> <label for=fio class="col-md-2 control-label">ФИО</label> <div class=col-md-8> <input type=text class=form-control name=fio required ng-model=$ctrl.member.fio ng-disabled=$ctrl.disabledForm autocomplete=off> <div ng-messages=member.fio.$error ng-if="$ctrl.isHasError(\'fio\')" role=alert> <div ng-message=required class=form__message--error>Введите ФИО</div> </div> </div> </div> <div class=form-group ng-class="{ \'has-error\' : $ctrl.isHasError(\'date\') }"> <label for=date class="col-md-2 control-label">Дата рождения</label> <div class=col-md-4> <div class=input-group> <input type=text id=date name=date required class=form-control autocomplete=off uib-datepicker-popup="{{ $ctrl.dateFormat }}" ng-model=$ctrl.member.date is-open=$ctrl.datePopupIsOpen show-button-bar=false on-open-focus=true ng-disabled=$ctrl.disabledForm> <span class=input-group-btn> <button class="btn btn-primary" type=button ng-click=$ctrl.openDatePopup()> <i class="fa fa-calendar" aria-hidden=true></i> </button> </span> </div> <div ng-messages=member.date.$error ng-if="$ctrl.isHasError(\'date\')" role=alert> <div ng-message=required class=form__message--error>Введите дату рождения</div> </div> </div> </div> <div class=form-group> <label for=gender class="col-md-2 control-label">Пол</label> <div class=col-md-4> <label class=radio-inline> <input type=radio name=gender value=муж checked=checked ng-model=$ctrl.member.gender ng-disabled=$ctrl.disabledForm> муж </label> <label class=radio-inline> <input type=radio name=gender value=жен ng-model=$ctrl.member.gender ng-disabled=$ctrl.disabledForm> жен </label> </div> </div> <div class=form-group ng-class="{ \'has-error\' : $ctrl.isHasError(\'distance\') }"> <label for=distance class="col-md-2 control-label">Дистанция</label> <div class=col-md-4> <input type=text maxlength=32 class=form-control name=distance required ng-model=$ctrl.member.distance ng-disabled=$ctrl.disabledForm autocomplete=off ng-disabled=$ctrl.disabledForm> <div ng-messages=member.distance.$error ng-if="$ctrl.isHasError(\'distance\')" role=alert> <div ng-message=required class=form__message--error>Введите дистанцию</div> </div> </div> </div> <div class=form-group> <label for=startNumber class="col-md-2 control-label">Стартовый номер</label> <div class=col-md-4> <input type=text maxlength=8 class=form-control ng-model=$ctrl.member.number name=startNumber ng-disabled=$ctrl.disabledForm placeholder="без номера"> </div> </div> <div class=form-group> <label for=club class="col-md-2 control-label">Клуб</label> <div class=col-md-4> <input type=text maxlength=64 class=form-control name=club ng-model=$ctrl.member.club ng-disabled=$ctrl.disabledForm placeholder="Не состою в клубе"> </div> </div> <div class=form-group> <label for=city class="col-md-2 control-label">Город</label> <div class=col-md-4> <input type=text maxlength=32 class=form-control name=city ng-model=$ctrl.member.city ng-disabled=$ctrl.disabledForm> </div> </div> <div class=form-group> <label for=сountry class="col-md-2 control-label">Страна/Регион</label> <div class=col-md-4> <input type=text maxlength=64 class=form-control name=сountry ng-model=$ctrl.member.country ng-disabled=$ctrl.disabledForm> </div> </div> <div class=form-group></div> <div class=form-group> <div class="col-md-8 col-md-offset-2"> <button type=submit class="btn btn-primary" ng-disabled="member.$invalid || $ctrl.disabledForm"> <i class="fa fa-lg fa-spinner fa-spin" ng-if=$ctrl.registerProgress></i> Регистрация </button> <button type=button class="btn btn-default" ng-click=$ctrl.onClickCancelButton() ng-disabled=$ctrl.disabledForm>Отмена</button> </div> </div> </fieldset> </form> </div> </div> </div> </div> </div> '},function(e,t){e.exports=' <progress-bar text="Загрузка списка участников..." ng-if=$ctrl.progress></progress-bar> <div class="page page--eventStartlist"> <div class=container ng-if=!$ctrl.progress> <div class=row> <div class=col-md-12> Здесь будет список участников </div> </div> </div> </div> '},function(e,t){e.exports='<div class=eventsFilter> <div class="panel panel-primary"> <div class=panel-heading> <h3 class=panel-title>Фильтр</h3> </div> <div class=panel-body> <div class=eventsFilter__block> <div class=checkbox> <label class=label--filter> <input type=checkbox value=probeg ng-click=$ctrl.onClickTag() ng-model=$ctrl.filter.probeg> Пробеги </label> </div> <div class=checkbox> <label class=label--filter> <input type=checkbox value=marathon ng-click=$ctrl.onClickTag() ng-model=$ctrl.filter.marathon> Марафоны </label> </div> <div class=checkbox> <label class=label--filter> <input type=checkbox value=training ng-click=$ctrl.onClickTag() ng-model=$ctrl.filter.training> Тренировки </label> </div> </div> </div> <div class=panel-footer ng-if=$ctrl.isActive()> <button type=button class="btn btn-block btn-default" ng-click=$ctrl.resetFilter()>Очистить</button> </div> </div> </div> '},function(e,t){e.exports=' <progress-bar text="Загрузка списка событий..." ng-if=$ctrl.progress></progress-bar> <div class="page page--eventsList"> <div class=container ng-if=!$ctrl.progress> <div class=row> <div class="col-md-2 col-sm-3 col-xs-12"> <events-list-filter handlers=$ctrl.filterHandlers></events-list-filter> </div> <div class="col-md-10 col-sm-9 col-xs-12"> <events-list events=$ctrl.filtredEvents></events-list> </div> </div> </div> </div> '},function(e,t){e.exports='<div class=homeInfo__events> <h3>Ближайшие события</h3> <div class=list-group> <div class="list-group-item info__spiner" ng-if=$ctrl.loadProgress> <i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw"></i> </div> <div class=list-group-item ng-repeat="event in $ctrl.events"> <h5 class=list-group-item-heading> {{ event.date | date: \'d.MM.yyyy\' }} </h5> <h4 class=list-group-item-heading> <a ui-sref="events.card({ id: event.id })">{{ event.title }}</a> </h4> <p class=list-group-item-text>{{ event.abstract }}</p> </div> </div> </div> '},function(e,t){e.exports='<div class=homeInfo__news> <h3>Новости</h3> <div class=list-group> <div class="list-group-item info__spiner" ng-if=$ctrl.loadProgress> <i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw"></i> </div> <div ng-if=!$ctrl.loadProgress> <div class=list-group-item ng-repeat="news in $ctrl.news"> <h5 class=list-group-item-heading> {{ news.date | date: \'d.MM.yyyy\' }} </h5> <h4 class=list-group-item-heading> <a ui-sref="news.card({ id: news.id })">{{ news.title }}</a> </h4> <p class=list-group-item-text>{{ news.abstract }}</p> </div> <div class=list-group-item ng-if=!$ctrl.news.length> <p class=list-group-item-text>Новостей пока нет</p> </div> </div> </div> </div> '},function(e,t){e.exports='<div class=homeInfo__updates> <h3>Обновления</h3> <div class=list-group> <div class="list-group-item info__spiner" ng-if=$ctrl.loadProgress> <i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw"></i> </div> <div ng-if=!$ctrl.loadProgress> <div class=list-group-item ng-repeat="update in $ctrl.updates"> <h5 class=list-group-item-heading> {{ update.date | date: \'d.MM.yyyy\' }} </h5> <h4 class=list-group-item-heading>{{ update.title }}</h4> <p class=list-group-item-text>{{ update.content }}</p> </div> <div class=list-group-item ng-if=!$ctrl.updates.length> <p class=list-group-item-text>Обновлений пока нет</p> </div> </div> </div> </div> '},function(e,t){e.exports='<div class="container homeInfo"> <div class=row> <div class=col-md-4> <info-news></info-news> </div> <div class=col-md-4> <info-event></info-event> </div> <div class=col-md-4> <info-update></info-update> </div> </div> </div> '},function(e,t){e.exports='<div class=container> <div class=row> <div class=col-md-12> <div class=jumbotron> <div class=jumbotron__spinner ng-if=$ctrl.loadProgress> <i class="fa fa-circle-o-notch fa-spin fa-5x fa-fw"></i> </div> <div ng-if=!$ctrl.loadProgress> <h1>{{ $ctrl.event.title }}</h1> <p> {{ $ctrl.event.date | date: \'EEEE, d MMMM yyyy\' }}, {{ $ctrl.event.time }} </p> <p>{{ $ctrl.event.abstract }}</p> <p> <a class="btn btn-primary btn-lg" ui-sref="events.card({ id: $ctrl.event.id })">Подробнее</a> </p> </div> </div> </div> </div> <div> </div></div>'},function(e,t){e.exports='<div class="page page--home"> <jumbotron></jumbotron> <info></info> </div> '},function(e,t){e.exports='<div class="page page--login"> <div class=container> <div class=row> <div class=col-md-6> <div class=well> <form name=auth class="form-horizontal from--auth" ng-submit=$ctrl.submit()> <fieldset> <legend>Авторизация</legend> <div class=form-group ng-class="{ \'has-error\' : $ctrl.isHasError(\'email\') }"> <label for=inputEmail class="col-md-2 control-label">Email</label> <div class=col-md-10> <input type=text class=form-control id=inputEmail name=email placeholder=Email required ng-model=$ctrl.auth.email ng-disabled=$ctrl.progress autocomplete=off> <div ng-messages=auth.email.$error ng-if="$ctrl.isHasError(\'email\')" role=alert> <div ng-message=required class=form__message--error>Введите email</div> </div> </div> </div> <div class=form-group ng-class="{ \'has-error\' : $ctrl.isHasError(\'password\') }"> <label for=inputPassword class="col-md-2 control-label">Пароль</label> <div class=col-md-10> <input type=password class=form-control id=inputPassword name=password required placeholder=Password ng-model=$ctrl.auth.password ng-disabled=$ctrl.progress autocomplete=off> <div ng-messages=auth.password.$error ng-if="$ctrl.isHasError(\'password\')" role=alert> <div ng-message=required class=form__message--error>Введите пароль</div> </div> </div> </div> <div class=form-group> <div class="col-md-10 col-md-offset-2"> <button type=submit class="btn btn-success" ng-disabled="auth.$invalid || $ctrl.progress"> <i class="fa fa-lg fa-spinner fa-spin" ng-if=$ctrl.progress></i> Войти </button> <a ui-sref=register href=# class="btn btn-default">Регистрация</a> </div> </div> </fieldset> </form> </div> </div> </div> </div> </div> '},function(e,t){e.exports='<progress-bar text=Загрузка... ng-if=$ctrl.loadProgress></progress-bar> <div class="page page--newsCard" ng-if=!$ctrl.loadProgress> <div class=container> <div class=row> <div class=col-md-12> <div class="page-header news__header"> <h4> <span class="label label-default">{{ $ctrl.news.date | date: \'d MMMM yyyy\' }}</span> </h4> <h2 class=text-warning>{{ $ctrl.news.title }}</h2> <div class=row> <div class="col-md-10 col-sm-12"> {{ $ctrl.news.abstract }} </div> </div> </div> </div> </div> <div class=row ng-if=$ctrl.news.content> <div class=col-md-12> <div class=well> <div class=row> <div class="col-md-10 col-sm-12"> <div class=news__content ng-bind-html=$ctrl.getContentHtml()></div> </div> </div> </div> </div> </div> <div class=row> <div class="col-md-10 col-sm-12"> <div id=vk_comments class=comments></div> </div> </div> <div> </div> </div></div>'},function(e,t){e.exports='<progress-bar text="Загрузка новости..." ng-if=$ctrl.loadProgress></progress-bar> <div class="page page--newsForm" ng-hide=$ctrl.loadProgress> <div class=container> <div class=row> <div class=col-md-12> <div class="well well--form"> <form name=news class="" ng-submit=$ctrl.submit()> <fieldset> <legend>{{ $ctrl.id ? \'Редактирование новости\' : \'Добавление новости\' }}</legend> <div class=form-group ng-class="{ \'has-error\' : $ctrl.isHasError(\'title\') }"> <label for=title class=control-label>Заголовок</label> <input type=text class=form-control id=title name=title required ng-model=$ctrl.news.title ng-disabled=$ctrl.disabledForm autocomplete=off> <div ng-messages=news.title.$error ng-if="$ctrl.isHasError(\'title\')" role=alert> <div ng-message=required class=form__message--error>Введите заголовок</div> </div> </div> <div class=form-group> <label for=abstract class=control-label>Краткое описание</label> <textarea class=form-control id=abstract name=abstract rows=2 required ng-model=$ctrl.news.abstract ng-disabled=$ctrl.disabledForm autocomplete=off></textarea> <div ng-messages=news.abstract.$error ng-if="$ctrl.isHasError(\'abstract\')" role=alert> <div ng-message=required class=form__message--error>Введите краткое описание</div> </div> </div> <div class=form-group> <label for=newsContent class=control-label>Содержание</label> <div ckeditor=$ctrl.ckeditorOptions id=newsContent ng-model=$ctrl.news.content></div> </div> <div class=form-group> <button type=submit class="btn btn-primary" ng-disabled="news.$invalid || $ctrl.disabledForm"> <i class="fa fa-lg fa-spinner fa-spin" ng-if=$ctrl.saveProgress></i> Сохранить </button> <button type=button class="btn btn-danger" ng-if=$ctrl.id ng-click=$ctrl.onClickRemoveButton() ng-disabled=$ctrl.disabledForm> <i class="fa fa-lg fa-spinner fa-spin" ng-if=$ctrl.removeProgress></i> Удалить </button> <button type=button class="btn btn-default" ng-click=$ctrl.onClickCancelButton() ng-disabled=$ctrl.disabledForm>Отмена</button> </div> </fieldset> </form> </div> </div> </div> </div> </div> '},function(e,t){e.exports='<progress-bar text="Загрузка новостей..." ng-if=$ctrl.loadProgress></progress-bar> <div class="page page--newsList" ng-if=!$ctrl.loadProgress> <div class=container> <div class=row> <div class="col-md-4 col-sm-6" ng-repeat="news in $ctrl.news"> <div class=thumbnail> <div class=caption> <h4><a ui-sref="news.card({ id: news.id })">{{ news.title }}</a></h4> <p>{{ news.abstract }}</p> <p class=news__date>Дата: {{ news.date | date: \'d MMMM yyyy\' }}</p> </div> </div> </div> </div> <div> </div> </div></div>'},function(e,t){e.exports='<div class="page page--register"> <div class=container> <div class=row> <div class=col-md-6> <div class="alert alert-warning alert-dismissible" role=alert ng-if=$ctrl.errorMessage> <button type=button class=close ng-click=$ctrl.hideErrorMessage() ng-disabled=$ctrl.blocked aria-label=Close> <span aria-hidden=true>&times;</span> </button> <strong>Ошибка!</strong> {{ $ctrl.errorMessage }} </div> </div> </div> </div> <div class=container> <div class=row> <div class=col-md-6> <div class=well> <form name=auth class="form-horizontal from--auth" ng-submit=$ctrl.submit()> <fieldset> <legend>Регистрация</legend> <div class=form-group ng-class="{ \'has-error\' : $ctrl.isHasError(\'name\') }"> <label for=inputName class="col-md-2 control-label">Имя</label> <div class="col-xs-12 col-sm-12 col-md-10"> <input type=text class=form-control id=inputName name=name placeholder="Ваше имя или псевдоним" required ng-model=$ctrl.auth.name ng-disabled="$ctrl.progress || $ctrl.blocked" autocomplete=off> <div ng-messages=auth.name.$error ng-if="$ctrl.isHasError(\'name\')" role=alert> <div ng-message=required class=form__message--error>Введите имя</div> </div> </div> </div> <div class=form-group> <label for=inputPhoto class="col-md-2 control-label">Фото</label> <div class="col-xs-12 col-sm-12 col-md-10"> <input type=text class=form-control id=inputPhoto name=photoURL placeholder="Ссылка на Вашу фотографию" ng-model=$ctrl.auth.photoURL ng-disabled="$ctrl.progress || $ctrl.blocked" autocomplete=off> </div> </div> <div class=form-group ng-class="{ \'has-error\' : $ctrl.isHasError(\'email\') }"> <label for=inputEmail class="col-md-2 control-label">Email</label> <div class="col-xs-12 col-sm-12 col-md-10"> <input type=email class=form-control id=inputEmail name=email placeholder=Email required ng-model=$ctrl.auth.email ng-disabled="$ctrl.progress || $ctrl.blocked" autocomplete=off> <div ng-messages=auth.email.$error ng-if="$ctrl.isHasError(\'email\')" role=alert> <div ng-message=required class=form__message--error>Введите email</div> <div ng-message=email class=form__message--error>Неправильный формат адреса электронной почты</div> </div> </div> </div> <div class=form-group ng-class="{ \'has-error\' : $ctrl.isHasError(\'password\') }"> <label for=inputPassword class="col-md-2 control-label">Пароль</label> <div class="col-xs-12 col-sm-12 col-md-10"> <input type=password class=form-control id=inputPassword name=password required placeholder=Пароль ng-model=$ctrl.auth.password ng-minlength=6 ng-disabled="$ctrl.progress || $ctrl.blocked" autocomplete=off> <div ng-messages=auth.password.$error ng-if="$ctrl.isHasError(\'password\')" role=alert> <div ng-message=required class=form__message--error>Введите пароль</div> <div ng-message=minlength class=form__message--error>Не менее шести символов</div> </div> </div> </div> <div class=form-group> <div class="col-md-offset-2 col-md-10"> <button type=submit class="btn btn-primary" ng-disabled="auth.$invalid || $ctrl.progress || $ctrl.blocked"> <i class="fa fa-lg fa-spinner fa-spin" ng-if=$ctrl.progress></i> Регистрация </button> </div> </div> </fieldset> </form> </div> </div> </div> </div> </div> '},function(e,t){e.exports='<div class="page page--user"> <div class=container> <div class=row> <div class=col-md-2> <div class="thumbnail text-center"> <img ng-src="{{ $ctrl.photoURL }}" ng-if=$ctrl.photoURL> <i class="fa fa-12x fa-user fa--user" aria-hidden=true ng-if=!$ctrl.photoURL></i> </div> <p class=text-center> <strong>{{ $ctrl.email }}</strong> </p> </div> <div class=col-md-10 ng-if=$ctrl.rules.write> <div class=btn-toolbar role=toolbar> <div class=btn-group role=group> <a ui-sref=events.new class="btn btn-primary">Добавить событие</a> </div> <div class=btn-group role=group> <a ui-sref=news.new class="btn btn-primary">Добавить новость</a> </div> </div> </div> </div> </div> </div> '},function(e,t,n){"use strict";var i=n(393),r=n(361),a=n.n(r),s=n(332);n.n(s);t.a={template:a.a,controller:i.a,bindings:{events:"<",emptyListMessage:"@"}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function e(){"ngInject";i(this,e)};t.a=r},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(392);t.a=r.a.module("app.components.eventsList",[]).component("eventsList",a.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function e(t){"ngInject";var n=this;i(this,e),t.getVisitors().then(function(e){n.visitors=e})};r.$inject=["CounterService"],t.a=r},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(395),s=n(362),o=n.n(s),l=n(333);n.n(l);t.a=r.a.module("app.components.footer",[]).component("footer",{template:o.a,controller:a.a})},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(399),s=n(396),o=n(394),l=n(402),c=n(408);t.a=r.a.module("app.components.common",[a.a.name,s.a.name,o.a.name,l.a.name,c.a.name])},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,r){"ngInject";i(this,e),this.$scope=t,this.$state=n,this.AuthService=r,this.stateNames=["home","news","calendar","events","about","login","user"],this._initState(),this._initAuth(),this._bindEvents()}return e.$inject=["$scope","$state","AuthService"],r(e,[{key:"logout",value:function(){this.AuthService.signOut()}},{key:"_initAuth",value:function(){this.auth=this.AuthService.getAuth()}},{key:"_initState",value:function(){var e=this,t={};this.stateNames.forEach(function(n){t[n]=e.$state.includes(n)}),this.state=t}},{key:"_bindEvents",value:function(){var e=this;this.$scope.$on("$stateChangeSuccess",function(){e._initState()}),this.AuthService.onAuthStateChanged(function(){e._initAuth()})}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(398),s=n(363),o=n.n(s),l=n(334);n.n(l);t.a=r.a.module("app.components.navbar",[]).component("navbar",{template:o.a,controller:a.a})},function(e,t,n){"use strict";var i=n(401),r=n(364),a=n.n(r),s=n(335);n.n(s);t.a={template:a.a,controller:i.a,bindings:{text:"@"}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function e(){i(this,e)};t.a=r},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(400);t.a=r.a.module("app.components.progressBar",[]).component("progressBar",a.a)},function(e,t,n){"use strict";var i=n(404),r=n(365),a=n.n(r),s=n(336);n.n(s);t.a={template:a.a,controller:i.a,bindings:{uploadFile:"="}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function e(){i(this,e)};t.a=r},function(e,t,n){"use strict";t.a={scope:{file:"="},link:function(e,t){t.bind("change",function(t){var n=t.target.files;e.file=n[0],e.$apply()})}}},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(405);t.a=r.a.module("app.components.uploadFileButton.directives.file",[]).directive("file",function(){return a.a})},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(406);t.a=r.a.module("app.components.uploadFileButton.directives",[a.a.name])},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(403),s=n(407);t.a=r.a.module("app.components.uploadFileButton",[s.a.name]).component("uploadFileButton",a.a)},function(e,t,n){"use strict";var i=n(410),r=n(366),a=n.n(r),s=n(337);n.n(s);t.a={template:a.a,controller:i.a}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function e(){i(this,e)};t.a=r},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(409);t.a=r.a.module("app.components.pages.about",[]).config(["$stateProvider",function(e){"ngInject";e.state("about",{url:"/about",template:"<about></about>"})}]).component("about",a.a)},function(e,t,n){"use strict";var i=n(418),r=n(370),a=n.n(r),s=n(339);n.n(s);t.a={template:a.a,controller:i.a,bindings:{filter:"<",dateBegin:"<",dateEnd:"<"}}},function(e,t,n){"use strict";var i=n(414),r=n(367),a=n.n(r),s=n(338);n.n(s);t.a={template:a.a,controller:i.a,bindings:{date:"<",options:"<",onChange:"&"}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){"ngInject";var n=this;i(this,e),this._initDatepickers(),t.$watch("$ctrl.date",function(e){n.onChange({date:e})})}return e.$inject=["$scope"],r(e,[{key:"_initDatepickers",value:function(){this.options=Object.assign({},{customClass:function(){return"datepicker--calendar"},showWeeks:!1},this.options)}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(413),s=n(416);t.a=r.a.module("app.components.pages.calendar.components.calendarDatepicker",[s.a.name]).component("calendarDatepicker",a.a)},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(368),s=n.n(a),o=n(369),l=n.n(o);t.a=r.a.module("app.components.pages.calendar.components.calendarDatepicker.templates",[]).run(["$templateCache",function(e){"ngInject";e.put("calendarDatepicker/templates/datepicker.html",s.a),e.put("calendarDatepicker/templates/day.html",l.a)}])},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(415);t.a=r.a.module("app.components.pages.calendar.components",[a.a.name])},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,r,a){"ngInject";var s=this;i(this,e),this.$state=n,this.CalendarPageConstants=a,this.EventService=r,this.filter||(this.filter="events"),this._initDatepickers(),this._loadEvents(),t.$watch("$ctrl.dateBegin",function(e){s.endDatepickerOptions={minDate:e,maxDate:s._getMaxDate()}})}return e.$inject=["$scope","$state","EventService","CalendarPageConstants"],r(e,[{key:"_getDefaultDateBegin",value:function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate())}},{key:"_getMaxDate",value:function(){var e=new Date;return new Date(e.getFullYear(),11,31)}},{key:"_initDatepickers",value:function(){var e=this._getMaxDate();this.beginDatepickerOptions={minDate:new Date(2015,0,1),maxDate:e},this.dateBegin=this._getDefaultDateBegin(),this.dateEnd=e,this.endDatepickerOptions={minDate:this.dateBegin,maxDate:e}}},{key:"filterIs",value:function(e){return e===this.filter}},{key:"getEvents",value:function(){return this.events}},{key:"_loadEvents",value:function(){var e=this,t=this._getLoadEventsOptions();this._startLoadProgress(),this.EventService.loadEvents(t).then(function(t){e._stopLoadProgress(),e.events=e._filterEvents(t)})}},{key:"_filterEvents",value:function(e){var t=this.CalendarPageConstants.filterTagMap,n=t[this.filter];return n?e.filter(function(e){return e.tag===n}):e}},{key:"_getLoadEventsOptions",value:function(){var e=this.dateBegin,t=this.dateEnd;return{dateBegin:Date.parse(e),dateEnd:Date.parse(t)}}},{key:"_startLoadProgress",value:function(){this.loadProgress=!0}},{key:"_stopLoadProgress",value:function(){this.loadProgress=!1}},{key:"onChangeDateBegin",value:function(e){this.dateBegin=e,this._loadEvents()}},{key:"onChangeDateEnd",value:function(e){this.dateEnd=e,this._loadEvents()}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(47),s=n.n(a),o=n(417),l=n(412);t.a=r.a.module("app.components.pages.calendar",[s.a,o.a.name]).config(["$stateProvider",function(e){"ngInject";e.state("calendar",{url:"/calendar/:filter",template:'<calendar filter="$ctrl.filter"></calendar>',controller:["$stateParams",function(e){this.filter=e.filter}],controllerAs:"$ctrl"})}]).constant("CalendarPageConstants",{filterTagMap:{events:null,probegs:"probeg",marathons:"marathon",trainings:"training"}}).component("calendar",l.a)},function(e,t,n){"use strict";var i=n(430),r=n(374),a=n.n(r),s=n(343);n.n(s);t.a={template:a.a,controller:i.a,bindings:{id:"<"}}},function(e,t,n){"use strict";var i=n(422),r=n(371),a=n.n(r),s=n(340);n.n(s);t.a={template:a.a,controller:i.a,bindings:{event:"<",provisionFileUrl:"<",provisionFileSize:"<",protocolFileUrl:"<",protocolFileSize:"<",startlistLength:"<"}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n){"ngInject";i(this,e),this.$sce=t,this._initVKPhotoGallery(n)}return e.$inject=["$sce","VKService"],r(e,[{key:"_initVKPhotoGallery",value:function(e){var t=this,n=this.event.vkAlbumPhotoId;n&&e.getPhotoGallery({albumId:n}).then(function(e){var n=e.items;t.slides=n.map(function(e,t){return{id:t,image:e.photo_604,text:e.text}})})}},{key:"getDescriptionHtml",value:function(){return this.$sce.trustAsHtml(this.event.description)}},{key:"getFileSize",value:function(e){var t=void 0;if(1048576<e){t=(e/1048576).toFixed()+" Мб"}else{t=(e/1024).toFixed()+" Кб"}return t}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(134),s=n.n(a),o=n(92),l=n.n(o),c=n(421);t.a=r.a.module("app.components.pages.events.event.card.body",[l.a,"ui.bootstrap",s.a]).component("eventCardBody",c.a)},function(e,t,n){"use strict";var i=n(425),r=n(372),a=n.n(r),s=n(341);n.n(s);t.a={template:a.a,controller:i.a,bindings:{event:"<"}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,r){"ngInject";var a=this;i(this,e);var s=n.onAuthStateChanged(function(e){e&&(a.rules=r.getRules(e.uid))});t.$on("$destroy",function(){s()}),this.AuthService=n}return e.$inject=["$scope","AuthService","UserRulesService"],r(e,[{key:"isAuth",value:function(){return this.AuthService.getAuth()}},{key:"isRegisterEnabled",value:function(){var e=Date.now();return this.isAuth()&&e<this.event.date}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(424);t.a=r.a.module("app.components.pages.events.event.card.footer",[]).component("eventCardFooter",a.a)},function(e,t,n){"use strict";var i=n(428),r=n(373),a=n.n(r),s=n(342);n.n(s);t.a={template:a.a,controller:i.a,bindings:{event:"<"}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function e(){"ngInject";i(this,e)};t.a=r},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(427);t.a=r.a.module("app.components.pages.events.event.card.header",[]).component("eventCardHeader",a.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,r,a,s){"ngInject";i(this,e),this.$state=t,this.EventService=n,this.FileStorageService=r,this.StartlistService=a,this.VKService=s,this._initEvent()}return e.$inject=["$state","EventService","FileStorageService","StartlistService","VKService"],r(e,[{key:"_initVKComments",value:function(){var e=this.event.id,t=this.$state.href("events.card",{id:e});this.VKService.initWidgetsComments({elementId:"vk_comments",pageUrl:"http://penzarun.ru/"+t,pageId:"event-"+e})}},{key:"_initEvent",value:function(){var e=this;this.id?(this._startLoadProgress(),this.EventService.getEvent(this.id).then(function(t){return e.event=t,t}).then(function(t){return Promise.all([e._initProvisionFile(t),e._initProtocolFile(t)])}).then(function(){return e.StartlistService.getStartlist(e.event.id)}).then(function(t){e.startlistLength=t.length,e._initVKComments()}).then(function(){e._stopLoadProgress()}).catch(function(t){throw e._stopLoadProgress(),Error(t)})):this.event={}}},{key:"_initProvisionFile",value:function(e){var t=this,n=e.id,i=e.isProvisionFile;return i?Promise.all([this.FileStorageService.getProvisionFileUrl(n),this.FileStorageService.getProvisionFileSize(n)]).then(function(e){t.provisionFileUrl=e[0],t.provisionFileSize=e[1]}):Promise.resolve()}},{key:"_initProtocolFile",value:function(e){var t=this,n=e.id,i=e.isProtocolFile;return i?Promise.all([this.FileStorageService.getProtocolFileUrl(n),this.FileStorageService.getProtocolFileSize(n)]).then(function(e){t.protocolFileUrl=e[0],t.protocolFileSize=e[1]}):Promise.resolve()}},{key:"_startLoadProgress",value:function(){this.loadProgress=!0}},{key:"_stopLoadProgress",value:function(){this.loadProgress=!1}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(420),s=n(429),o=n(423),l=n(426);t.a=r.a.module("app.components.pages.events.event.card",[s.a.name,o.a.name,l.a.name]).component("eventCardPage",a.a)},function(e,t,n){"use strict";var i=n(433),r=n(375),a=n.n(r),s=n(344);n.n(s);t.a={template:a.a,controller:i.a,bindings:{id:"<"}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,r,a){"ngInject";i(this,e),this.$scope=t,this.$state=n,this.EventService=r,this.FileStorageService=a,this._initEvent(),this.dateFormat="EEEE, d MMMM yyyy",this.datePopupIsOpen=!1,this._initCkeditorOptions()}return e.$inject=["$scope","$state","EventService","FileStorageService"],r(e,[{key:"_initCkeditorOptions",value:function(){this.ckeditorOptions={language:"ru",allowedContent:!0,entities:!1,height:300}}},{key:"_initEvent",value:function(){var e=this;this.id?(this._startLoadProgress(),this.EventService.getEvent(this.id).then(function(t){return e.event=t,t}).then(function(t){return Promise.all([e._loadProvisionFile(t),e._loadProtocolFile(t)])}).then(function(t){e.provisionFile={name:t[0]},e.protocolFile={name:t[1]}}).then(function(){e._stopLoadProgress()}).catch(function(t){throw e._stopLoadProgress(),Error(t)})):this.event=this.EventService.getDefaultEvent()}},{key:"isHasError",value:function(e){var t=this.$scope.event[e];return t.$invalid&&t.$dirty&&t.$touched}},{key:"openDatePopup",value:function(){this.datePopupIsOpen=!0}},{key:"submit",value:function(){var e=this,t=this.event,n=t.date,i=t.time,r=t.title,a=t.abstract,s=void 0===a?"":a,o=t.description,l=void 0===o?"":o,c=t.tag,d=t.place,u=void 0===d?"г. Пенза, Олимпийская аллея":d,v=t.distances,f=void 0===v?"":v,p=t.master,m=void 0===p?"":p,g=t.masterUrl,h=void 0===g?"":g,b=t.masterPerson,y=void 0===b?"":b,$=t.masterPhone,w=void 0===$?"":$,_=t.masterEmail,k=void 0===_?"":_,P=t.vkAlbumPhotoId,E=void 0===P?"":P;this._startSaveProgress();var F={date:n.getTime(),time:i,title:r,abstract:s,description:l,tag:c,place:u,distances:f,master:m,masterUrl:h,masterPerson:y,masterPhone:w,masterEmail:k,isProvisionFile:this._isProvisionFile(),isProtocolFile:this._isProtocolFile(),vkAlbumPhotoId:E};this._saveEvent(F).then(function(t){return Promise.all([e._updateProvisionFile(t),e._updateProtocolFile(t)])}).then(function(){e._gotoEventList()}).catch(function(t){throw e._stopSaveProgress(),Error(t)})}},{key:"onClickRemoveButton",value:function(){this._removeEvent()}},{key:"onClickCancelButton",value:function(){this._gotoEventList()}},{key:"removeProvision",value:function(){this.provisionFile=null}},{key:"removeProtocol",value:function(){this.protocolFile=null}},{key:"_saveEvent",value:function(e){return this.id?this.EventService.saveEvent(this.id,e):this.EventService.addEvent(e)}},{key:"_removeEvent",value:function(){var e=this;this._startRemoveProgress(),this.EventService.removeEvent(this.id).then(function(){e._gotoEventList()}).catch(function(t){throw e._stopRemoveProgress(),Error(t)})}},{key:"_isProvisionFile",value:function(){return!(!this.provisionFile||!this.provisionFile.name)}},{key:"_isProtocolFile",value:function(){return!(!this.protocolFile||!this.protocolFile.name)}},{key:"_loadProvisionFile",value:function(e){var t=e.id,n=e.isProvisionFile;return n?this.FileStorageService.getProvisionFileName(t):Promise.resolve(null)}},{key:"_loadProtocolFile",value:function(e){var t=e.id,n=e.isProtocolFile;return n?this.FileStorageService.getProtocolFileName(t):Promise.resolve(null)}},{key:"_updateProvisionFile",value:function(e){return this.provisionFile?this.provisionFile.size?this.FileStorageService.uploadProvisionFile(e,this.provisionFile):Promise.resolve():this.FileStorageService.deleteProvisionFile(e)}},{key:"_updateProtocolFile",value:function(e){return this.protocolFile?this.protocolFile.size?this.FileStorageService.uploadProtocolFile(e,this.protocolFile):Promise.resolve():this.FileStorageService.deleteProtocolFile(e)}},{key:"_startLoadProgress",value:function(){this.loadProgress=!0}},{key:"_stopLoadProgress",value:function(){this.loadProgress=!1}},{key:"_startSaveProgress",value:function(){this.saveProgress=this.disabledForm=!0,this._setReadOnlyCKEDITOR(this.disabledForm)}},{key:"_stopSaveProgress",value:function(){this.saveProgress=this.disabledForm=!1,this._setReadOnlyCKEDITOR(this.disabledForm)}},{key:"_startRemoveProgress",value:function(){this.removeProgress=this.disabledForm=!0,this._setReadOnlyCKEDITOR(this.disabledForm)}},{key:"_stopRemoveProgress",value:function(){this.removeProgress=this.disabledForm=!1,this._setReadOnlyCKEDITOR(this.disabledForm)}},{key:"_gotoEventList",value:function(){this.$state.go("events.list")}},{key:"_setReadOnlyCKEDITOR",value:function(e){window.CKEDITOR.instances.eventDescription.setReadOnly(e)}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(91),s=n.n(a),o=n(135),l=(n.n(o),n(432));t.a=r.a.module("app.components.pages.events.event.form",[s.a,"ckeditor"]).component("eventFormPage",l.a)},function(e,t,n){"use strict";var i=n(436),r=n(376),a=n.n(r),s=n(345);n.n(s);t.a={template:a.a,controller:i.a,bindings:{id:"<"}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,r){"ngInject";i(this,e),this.$scope=t,this.$state=n,this.EventService=r,this.dateFormat="d MMMM yyyy",this.datePopupIsOpen=!1,this._initMember(),this._initEvent(r)}return e.$inject=["$scope","$state","EventService"],r(e,[{key:"openDatePopup",value:function(){this.datePopupIsOpen=!0}},{key:"_initEvent",value:function(e){var t=this;this._startProgress(),e.getEvent(this.id).then(function(e){t.event=e,t._stopProgress()}).catch(function(e){throw t._stopProgress(),Error(e)})}},{key:"_initMember",value:function(){this.member={fio:"",date:"",gender:"муж",number:"",city:"Пенза",club:"",country:"Россия"}}},{key:"_startProgress",value:function(){this.progress=!0}},{key:"_stopProgress",value:function(){this.progress=!1}},{key:"onClickCancelButton",value:function(){this.$state.go("events.list")}},{key:"isHasError",value:function(e){var t=this.$scope.member[e];return t.$invalid&&t.$dirty&&t.$touched}},{key:"submit",value:function(){}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(91),s=n.n(a),o=n(435);t.a=r.a.module("app.components.pages.events.register",[s.a]).component("eventRegisterPage",o.a)},function(e,t,n){"use strict";var i=n(439),r=n(377),a=n.n(r),s=n(346);n.n(s);t.a={template:a.a,controller:i.a}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){"ngInject";i(this,e),this.EventService=t,this._loadEvents()}return e.$inject=["EventService"],r(e,[{key:"_loadEvents",value:function(){var e=this;this._startProgress(),this.EventService.loadEvents().then(function(t){e._stopProgress(),e.filtredEvents=e.events=t})}},{key:"_startProgress",value:function(){this.progress=!0}},{key:"_stopProgress",value:function(){this.progress=!1}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(438);t.a=r.a.module("app.components.pages.events.startlist",[]).component("eventStartlistPage",a.a)},function(e,t,n){"use strict";var i=n(445),r=n(379),a=n.n(r),s=n(348);n.n(s);t.a={template:a.a,controller:i.a}},function(e,t,n){"use strict";var i=n(443),r=n(378),a=n.n(r),s=n(347);n.n(s);t.a={template:a.a,controller:i.a,bindings:{handlers:"<"}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){"ngInject";i(this,e),this._initFilter()}return r(e,[{key:"isActive",value:function(){var e=this.filter,t=e.probeg,n=e.marathon,i=e.training;return t||n||i}},{key:"onClickTag",value:function(){this._onChangeFilter()}},{key:"resetFilter",value:function(){this._initFilter(),this._onChangeFilter()}},{key:"_initFilter",value:function(){this.filter={probeg:!1,marathon:!1,training:!1}}},{key:"_onChangeFilter",value:function(){var e=this._createFiterArray(this.filter);this.handlers.onChangeFilter(e)}},{key:"_createFiterArray",value:function(e){var t=[];for(var n in e)e[n]&&t.push(n);return t}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(442);t.a=r.a.module("app.components.pages.events.list.filter",[]).component("eventsListFilter",a.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){"ngInject";i(this,e),this.EventService=t,this._initFilterHandlers(),this._loadEvents()}return e.$inject=["EventService"],r(e,[{key:"_loadEvents",value:function(){var e=this;this._startProgress(),this.EventService.loadEvents().then(function(t){e._stopProgress(),e.filtredEvents=e.events=t})}},{key:"_startProgress",value:function(){this.progress=!0}},{key:"_stopProgress",value:function(){this.progress=!1}},{key:"_initFilterHandlers",value:function(){var e=this;this.filterHandlers={onChangeFilter:function(t){e.filtredEvents=t.length?e.events.filter(function(e){return t.some(function(t){return t===e.tag})}):e.events}}}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(441),s=n(444);t.a=r.a.module("app.components.pages.events.list",[s.a.name]).component("eventsListPage",a.a)},function(e,t,n){"use strict";function i(e){"ngInject";this.id=e.id}function r(e){"ngInject";return e.requireSignIn()}function a(e){"ngInject";return e.requireWriteRules()}a.$inject=["UserRulesService"],i.$inject=["$stateParams"],r.$inject=["AuthService"];var s=n(1),o=n.n(s),l=n(47),c=n.n(l),d=n(434),u=n(431),v=n(446),f=n(440),p=n(437);t.a=o.a.module("app.components.pages.events",[c.a,d.a.name,u.a.name,v.a.name,f.a.name,p.a.name]).config(["$stateProvider",function(e){"ngInject";e.state("events",{abstract:!0,url:"/events",template:"<ui-view />"}).state("events.list",{url:"/list",template:"<events-list-page></events-list-page>"}).state("events.new",{url:"/new",template:"<event-form-page></event-form-page>",resolve:{adminResolve:a}}).state("events.edit",{url:"/edit/:id",template:'<event-form-page id="$ctrl.id"></event-form-page>',resolve:{adminResolve:a},controller:i,controllerAs:"$ctrl"}).state("events.card",{url:"/card/:id",template:'<event-card-page id="$ctrl.id"></event-card-page>',controller:i,controllerAs:"$ctrl"}).state("events.startlist",{url:"/startlist/:id",template:'<event-startlist-page id="$ctrl.id"></event-startlist-page>',controller:i,controllerAs:"$ctrl"}).state("events.register",{url:"/register/:id",template:'<event-register-page id="$ctrl.id"></event-register-page>',resolve:{authResolve:r},controller:i,controllerAs:"$ctrl"})}])},function(e,t,n){"use strict";var i=n(466),r=n(385),a=n.n(r),s=n(354);n.n(s);t.a={template:a.a,controller:i.a,bindings:{}}},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(465),s=n(462);t.a=r.a.module("app.components.pages.home.components",[a.a.name,s.a.name])},function(e,t,n){"use strict";var i=n(461),r=n(383),a=n.n(r),s=n(352);n.n(s);t.a={template:a.a,controller:i.a}},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(457),s=n(454),o=n(460);t.a=r.a.module("app.components.pages.home.components.info.components",[a.a.name,s.a.name,o.a.name])},function(e,t,n){"use strict";var i=n(453),r=n(380),a=n.n(r),s=n(349);n.n(s);t.a={template:a.a,controller:i.a,bindings:{}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){"ngInject";i(this,e),this._loadEvents(t)}return e.$inject=["EventService"],r(e,[{key:"_loadEvents",value:function(e){var t=this,n={dateBegin:Date.now(),limitToFirst:4};this._startLoadProgress(),e.loadEvents(n).then(function(e){t.events=e.slice(1,n.limitToFirst)}).then(function(){t._stopLoadProgress()}).catch(function(e){throw t._stopLoadProgress(),Error(e)})}},{key:"_startLoadProgress",value:function(){this.loadProgress=!0}},{key:"_stopLoadProgress",value:function(){this.loadProgress=!1}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(452);t.a=r.a.module("app.components.pages.home.components.info.components.event",[]).component("infoEvent",a.a)},function(e,t,n){"use strict";var i=n(456),r=n(381),a=n.n(r),s=n(350);n.n(s);t.a={template:a.a,controller:i.a}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){"ngInject";i(this,e),this._loadNews(t)}return e.$inject=["NewsService"],r(e,[{key:"_loadNews",value:function(e){var t=this,n={limitToLast:3};this._startLoadProgress(),e.loadNews(n).then(function(e){t.news=e}).then(function(){t._stopLoadProgress()}).catch(function(e){throw t._stopLoadProgress(),Error(e)})}},{key:"_startLoadProgress",value:function(){this.loadProgress=!0}},{key:"_stopLoadProgress",value:function(){this.loadProgress=!1}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(455);t.a=r.a.module("app.components.pages.home.components.info.components.news",[]).component("infoNews",a.a)},function(e,t,n){"use strict";var i=n(459),r=n(382),a=n.n(r),s=n(351);n.n(s);t.a={template:a.a,controller:i.a,bindings:{}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){"ngInject";i(this,e),this._loadUpdates(t)}return e.$inject=["UpdateService"],r(e,[{key:"_loadUpdates",value:function(e){var t=this,n={limitToLast:3};this._startLoadProgress(),e.loadUpdates(n).then(function(e){t.updates=e}).then(function(){t._stopLoadProgress()}).catch(function(e){throw t._stopLoadProgress(),Error(e)})}},{key:"_startLoadProgress",value:function(){this.loadProgress=!0}},{key:"_stopLoadProgress",value:function(){this.loadProgress=!1}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(458);t.a=r.a.module("app.components.pages.home.components.info.components.update",[]).component("infoUpdate",a.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function e(){"ngInject";i(this,e)};t.a=r},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(450),s=n(451);t.a=r.a.module("app.components.pages.home.components.info",[s.a.name]).component("info",a.a)},function(e,t,n){"use strict";var i=n(464),r=n(384),a=n.n(r),s=n(353);n.n(s);t.a={template:a.a,controller:i.a,bindings:{}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){"ngInject";i(this,e),this._loadEvent(t)}return e.$inject=["EventService"],r(e,[{key:"_loadEvent",value:function(e){var t=this,n={dateBegin:Date.now(),limitToFirst:1};this._startLoadProgress(),e.loadEvents(n).then(function(e){t.event=e[0]}).then(function(){t._stopLoadProgress()}).catch(function(e){throw t._stopLoadProgress(),Error(e)})}},{key:"_startLoadProgress",value:function(){this.loadProgress=!0}},{key:"_stopLoadProgress",value:function(){this.loadProgress=!1}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(463);t.a=r.a.module("app.components.pages.home.components.jumbotron",[]).component("jumbotron",a.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function e(){"ngInject";i(this,e)};t.a=r},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(448),s=n(449);t.a=r.a.module("app.components.pages.home",[s.a.name]).config(["$stateProvider",function(e){"ngInject";e.state("home",{url:"/home",template:"<home></home>"})}]).component("home",a.a)},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(467),s=n(471),o=n(419),l=n(447),c=n(411),d=n(470),u=n(485),v=n(482);t.a=r.a.module("app.components.pages",[a.a.name,s.a.name,o.a.name,l.a.name,c.a.name,d.a.name,u.a.name,v.a.name])},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,r){"ngInject";i(this,e),this.$scope=t,this.$state=n,this.AuthService=r,this.auth={email:"",password:""}}return e.$inject=["$scope","$state","AuthService"],r(e,[{key:"submit",value:function(){var e=this,t=this.auth,n=t.email,i=t.password;this._startProgress(),this.AuthService.signInWithEmailAndPassword(n,i).then(function(){e._gotoUserState()}).catch(function(t){throw e._stopProgress(),Error(t)})}},{key:"isHasError",value:function(e){var t=this.$scope.auth[e];return t.$invalid&&t.$dirty&&t.$touched}},{key:"_startProgress",value:function(){this.progress=!0}},{key:"_stopProgress",value:function(){this.progress=!1}},{key:"_gotoUserState",value:function(){this.$state.go("user")}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(469),s=n(386),o=n.n(s),l=n(355);n.n(l);t.a=r.a.module("app.components.pages.login",[]).config(["$stateProvider",function(e){"ngInject";e.state("login",{url:"/login",template:"<login></login>"})}]).component("login",{template:o.a,controller:a.a})},function(e,t,n){"use strict";function i(e){"ngInject";this.id=e.id}function r(e){"ngInject";return e.requireWriteRules()}i.$inject=["$stateParams"],r.$inject=["UserRulesService"];var a=n(1),s=n.n(a),o=n(47),l=n.n(o),c=n(480),d=n(474),u=n(477);t.a=s.a.module("app.components.pages.news",[l.a,c.a.name,d.a.name,u.a.name]).config(["$stateProvider",function(e){"ngInject";e.state("news",{abstract:!0,url:"/news",template:"<ui-view />"}).state("news.list",{url:"/list",template:"<news-list-page></news-list-page>"}).state("news.card",{url:"/card/:id",template:'<news-card-page id="$ctrl.id"></news-card-page>',controller:i,controllerAs:"$ctrl"}).state("news.new",{url:"/new",template:"<news-form-page></news-form-page>",resolve:{adminResolve:r}}).state("news.edit",{url:"/edit/:id",template:'<news-form-page id="$ctrl.id"></news-form-page>',resolve:{adminResolve:r},controller:i,controllerAs:"$ctrl"})}])},function(e,t,n){"use strict";var i=n(473),r=n(387),a=n.n(r),s=n(356);n.n(s);t.a={template:a.a,controller:i.a,bindings:{id:"<"}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,r){"ngInject";i(this,e),this.$sce=t,this.$state=n,this._initVKComments(),this._loadNews(r)}return e.$inject=["$sce","$state","NewsService"],r(e,[{key:"_initVKComments",value:function(){var e=this.id,t=this.$state.href("news.card",{id:e}),n="http://penzarun.ru/"+t;window.VK.Widgets.Comments("vk_comments",{redesign:1,limit:10,attach:"*",pageUrl:n},"news-"+e)}},{key:"getContentHtml",value:function(){return this.$sce.trustAsHtml(this.news.content)}},{key:"_loadNews",value:function(e){var t=this;this._startLoadProgress(),e.getNewsById(this.id).then(function(e){t.news=e}).then(function(){t._stopLoadProgress()}).catch(function(e){throw t._stopLoadProgress(),Error(e)})}},{key:"_startLoadProgress",value:function(){this.loadProgress=!0}},{key:"_stopLoadProgress",value:function(){this.loadProgress=!1}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(92),s=n.n(a),o=n(472);t.a=r.a.module("app.components.pages.news.card",[s.a]).component("newsCardPage",o.a)},function(e,t,n){"use strict";var i=n(476),r=n(388),a=n.n(r),s=n(357);n.n(s);t.a={template:a.a,controller:i.a,bindings:{id:"<"}}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,r,a){"ngInject";i(this,e),this.$q=t,this.$scope=n,this.$state=r,this.NewsService=a,this._initNews(),this.ckeditorOptions=this._initCkeditorOptions()}return e.$inject=["$q","$scope","$state","NewsService"],r(e,[{key:"_initCkeditorOptions",value:function(){return{language:"ru",allowedContent:!0,entities:!1,height:300}}},{key:"_initNews",value:function(){var e=this;return this.$q.resolve(this.id).then(function(t){var n=void 0;return t?(e._startLoadProgress(),n=e.NewsService.getNewsById(t)):n={},n}).then(function(t){e._stopLoadProgress(),e.news=t}).catch(function(t){throw e._stopLoadProgress(),Error(t)})}},{key:"_startLoadProgress",value:function(){this.loadProgress=!0}},{key:"_stopLoadProgress",value:function(){this.loadProgress=!1}},{key:"isHasError",value:function(e){var t=this.$scope.news[e];return t.$invalid&&t.$dirty&&t.$touched}},{key:"submit",value:function(){var e=this,t=this.news,n=t.title,i=t.abstract,r=void 0===i?"":i,a=t.content,s=void 0===a?"":a;this._startSaveProgress(),this._saveNews({title:n,abstract:r,content:s}).then(function(t){e._gotoNews(t)}).catch(function(t){throw e._stopSaveProgress(),Error(t)})}},{key:"onClickRemoveButton",value:function(){this._removeNews()}},{key:"onClickCancelButton",value:function(){this._gotoNewsList()}},{key:"_saveNews",value:function(e){var t=this;return this.$q.resolve(this.id).then(function(n){return n?t.NewsService.saveNews(n,e):t.NewsService.addNews(e)})}},{key:"_removeNews",value:function(){var e=this;this._startRemoveProgress(),this.NewsService.removeNews(this.id).then(function(){e._gotoNewsList()}).catch(function(t){throw e._stopRemoveProgress(),Error(t)})}},{key:"_startSaveProgress",value:function(){this.saveProgress=this.disabledForm=!0,this._setReadOnlyCKEDITOR(this.disabledForm)}},{key:"_stopSaveProgress",value:function(){this.saveProgress=this.disabledForm=!1,this._setReadOnlyCKEDITOR(this.disabledForm)}},{key:"_startRemoveProgress",value:function(){this.removeProgress=this.disabledForm=!0,this._setReadOnlyCKEDITOR(this.disabledForm)}},{key:"_stopRemoveProgress",value:function(){this.removeProgress=this.disabledForm=!1,this._setReadOnlyCKEDITOR(this.disabledForm)}},{key:"_setReadOnlyCKEDITOR",value:function(e){window.CKEDITOR.instances.newsContent.setReadOnly(e)}},{key:"_gotoNews",value:function(e){this.$state.go("news.card",{id:e})}},{key:"_gotoNewsList",value:function(){this.$state.go("news.list")}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(475);t.a=r.a.module("app.components.pages.news.form",[]).component("newsFormPage",a.a)},function(e,t,n){"use strict";var i=n(479),r=n(389),a=n.n(r),s=n(358);n.n(s);t.a={template:a.a,controller:i.a}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){"ngInject";i(this,e),this._loadNews(t)}return e.$inject=["NewsService"],r(e,[{key:"_loadNews",value:function(e){var t=this;this._startLoadProgress(),e.loadNews().then(function(e){t.news=e}).then(function(){t._stopLoadProgress()}).catch(function(e){throw t._stopLoadProgress(),Error(e)})}},{key:"_startLoadProgress",value:function(){this.loadProgress=!0}},{key:"_stopLoadProgress",value:function(){this.loadProgress=!1}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(478);t.a=r.a.module("app.components.pages.news.list",[]).component("newsListPage",a.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,r){"ngInject";i(this,e),this.$scope=t,this.$state=n,this.AuthService=r}return e.$inject=["$scope","$state","AuthService"],r(e,[{key:"submit",value:function(){var e=this,t=this.auth,n=t.email,i=t.password,r=t.name,a=t.photoURL;this._startProgress(),this.AuthService.createUser({email:n,password:i,name:r,photoURL:a}).then(function(){e._gotoUserState()}).catch(function(t){e._stopProgress(),e._onError(t)})}},{key:"_onError",value:function(e){var t=this,n=void 0;switch(e.code){case"auth/email-already-in-use":n="Пользователь с таким адресом электронной почты уже существует";break;case"auth/invalid-email":n="Неправильный формат адреса электронной почты";break;case"auth/operation-not-allowed":n="Регистрация заблокирована";break;case"auth/weak-password":n="Слишком простой пароль";break;case"auth/too-many-requests":n="Авторизация временно заблокирована",this.blocked=!0,this.$timeout(function(){t.blocked=!1,t.errorMessage=null},5e3);break;default:throw Error(e)}this.errorMessage=n}},{key:"hideErrorMessage",value:function(){this.errorMessage=null}},{key:"isHasError",value:function(e){var t=this.$scope.auth[e];return t.$invalid&&t.$dirty&&t.$touched}},{key:"_startProgress",value:function(){this.progress=!0}},{key:"_stopProgress",value:function(){this.progress=!1}},{key:"_gotoUserState",value:function(){this.$state.go("user")}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(481),s=n(390),o=n.n(s),l=n(359);n.n(l);t.a=r.a.module("app.components.pages.register",[]).config(["$stateProvider",function(e){"ngInject";e.state("register",{url:"/register",template:"<register></register>"})}]).component("register",{template:o.a,controller:a.a})},function(e,t,n){"use strict";var i=n(484),r=n(391),a=n.n(r),s=n(360);n.n(s);t.a={template:a.a,controller:i.a}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function e(t,n,r){"ngInject";var a=this;i(this,e);var s=n.onAuthStateChanged(function(e){e&&(a.userName=e.displayName,a.photoURL=e.photoURL,a.email=e.email,a.rules=r.getRules(e.uid))});t.$on("$destroy",function(){s()})};r.$inject=["$scope","AuthService","UserRulesService"],t.a=r},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(47),s=n.n(a),o=n(483);t.a=r.a.module("app.components.pages.user",[s.a]).config(["$stateProvider",function(e){"ngInject";e.state("user",{url:"/user",template:"<user-page />"})}]).component("userPage",o.a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(126),r=(n.n(i),n(1)),a=n.n(r),s=n(123),o=(n.n(s),n(47)),l=n.n(o),c=n(90),d=n.n(c),u=n(125),v=(n.n(u),n(124)),f=n.n(v),p=n(127),m=(n.n(p),n(128)),g=(n.n(m),n(130)),h=n(131),b=n(132),y=n(129);n.n(y);window.firebase||(window.firebase=d.a),a.a.module("app",[l.a,"firebase",f.a,g.a.name,h.a.name,b.a.name]).config(["$urlRouterProvider",function(e){"ngInject";e.otherwise("/home"),window.firebase.initializeApp({apiKey:"AIzaSyBmx88VowTEZpgtDyM02J3Y0Ntq6wBPaOE",authDomain:"project-5043437142388192252.firebaseapp.com",databaseURL:"https://project-5043437142388192252.firebaseio.com",storageBucket:"gs://project-5043437142388192252.appspot.com"}),window.VK.init({apiId:5561839,onlyWidgets:!1})}]).run(["$rootScope","$state",function(e,t){"ngInject";e.$on("$stateChangeError",function(e,n,i,r,a,s){"AUTH_REQUIRED"===s&&t.go("home")})}])},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){"ngInject";i(this,e),this.auth=t()}return e.$inject=["$firebaseAuth"],r(e,[{key:"waitForSignIn",value:function(){return this.auth.$waitForSignIn()}},{key:"requireSignIn",value:function(){return this.auth.$requireSignIn()}},{key:"getAuth",value:function(){return this.auth.$getAuth()}},{key:"onAuthStateChanged",value:function(e){return this.auth.$onAuthStateChanged(function(t){e(t)})}},{key:"signInWithEmailAndPassword",value:function(e,t){return this.auth.$signInWithEmailAndPassword(e,t)}},{key:"signOut",value:function(){this.auth.$signOut()}},{key:"createUser",value:function(e){var t=e.email,n=e.password,i=e.name,r=e.photoURL;return this.auth.$createUserWithEmailAndPassword(t,n).then(function(e){return e.updateProfile({displayName:i,photoURL:r}).then(function(){return e})})}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(487);t.a=r.a.module("app.services.auth",[]).service("AuthService",a.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,r,a){"ngInject";i(this,e);var s=r.databaseName;this.CounterServiceConstants=r,this.AuthService=a;var o=t.getFirebase(),l=o.database().ref(s);this.$obj=n(l)}return e.$inject=["FirebaseService","$firebaseObject","CounterServiceConstants","AuthService"],r(e,[{key:"getVisitors",value:function(){return this.visitors||(this.visitors=this._initVisitors()),this.visitors}},{key:"_initVisitors",value:function(){var e=this,t={},n=this._getCurrentKey();return this.$obj.$loaded().then(function(e){var i=e.total,r=e[n];r||(r=e[n]={});var a=r,s=a.value;isFinite(i)||(i=0),t.total=e.total=i+1,isFinite(s)||(s=0),t.current=r.value=s+1}).then(function(){var t=e.AuthService.getAuth(),n=e.CounterServiceConstants.adminUID;if(!t||t.uid!==n)return e.$obj.$save()}).then(function(){return t})}},{key:"_getCurrentKey",value:function(){var e=new Date;return""+e.getFullYear()+e.getMonth()+e.getDate()}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(489);t.a=r.a.module("app.services.counter",[]).service("CounterService",a.a).constant("CounterServiceConstants",{adminUID:"GHL9MKZQRBeSHObFCUt76xPrUM63",databaseName:"visitors"}).name},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n,r){"ngInject";i(this,e),this.firebase=t.getFirebase(),this.ref=this.firebase.database().ref("events").orderByChild("date"),this.$firebaseArray=n,this.$firebaseObject=r}return e.$inject=["FirebaseService","$firebaseArray","$firebaseObject"],a(e,[{key:"loadEvents",value:function(e){var t=this,n=e?this._getRefByOptions(e):this.ref;return this.$firebaseArray(n).$loaded().then(function(e){return e.map(function(e){return t._mapEvent(e)})})}},{key:"_getRefByOptions",value:function(e){var t=e.dateBegin,n=e.dateEnd,i=e.limitToFirst,r=this.ref;return t&&(r=r.startAt(t)),n&&(r=r.endAt(n)),i&&(r=r.limitToFirst(i)),r}},{key:"_mapEvent",value:function(e){var t=e.$id,n=e.date,i=e.time,r=e.title,a=e.abstract,s=e.description,o=e.tag,l=void 0===o?"event":o,c=e.place,d=e.distances,u=e.master,v=e.masterUrl,f=e.masterPerson,p=e.masterPhone,m=e.masterEmail,g=e.isProvisionFile,h=e.isProtocolFile,b=e.vkAlbumPhotoId;return{id:t,time:i,title:r,abstract:a,description:s,tag:l,date:new Date(n),place:c,distances:d,master:u,masterUrl:v,masterPerson:f,masterPhone:p,masterEmail:m,isProvisionFile:g,isProtocolFile:h,vkAlbumPhotoId:b}}},{key:"getEvent",value:function(e){var t=this;return this._getEventObj(e).$loaded().then(function(e){return t._mapEvent(e)})}},{key:"getDefaultEvent",value:function(){return{tag:"event",time:"11:00"}}},{key:"saveEvent",value:function(e,t){var n=this._getEventObj(e);return n.$loaded().then(function(e){return Object.assign(e,t,{editTimestamp:Date.now()}),n.$save()}).then(function(e){return e.key})}},{key:"addEvent",value:function(e){return this.$firebaseArray(this.ref).$add(r({},e,{createTimestamp:Date.now()})).then(function(e){return e.key})}},{key:"removeEvent",value:function(e){return this._getEventObj(e).$remove()}},{key:"_getEventObj",value:function(e){var t=this.firebase.database().ref("events/"+e);return this.$firebaseObject(t)}}]),e}();t.a=s},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(491);t.a=r.a.module("app.services.event",[]).service("EventService",a.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a={provision:"Положение",protocol:"Протокол"},s=function(){function e(t){"ngInject";i(this,e);var n=t.getFirebase();this.storageRef=n.storage().ref()}return e.$inject=["FirebaseService"],r(e,[{key:"uploadProvisionFile",value:function(e,t){return this._uploadFile(e,t,a.provision)}},{key:"deleteProvisionFile",value:function(e){return this._deleteFile(e,a.provision)}},{key:"getProvisionFileUrl",value:function(e){return this._getUrl(e,a.provision)}},{key:"getProvisionFileName",value:function(e){return this._getFileName({eventKey:e,fileName:a.provision})}},{key:"getProvisionFileSize",value:function(e){return this._getFileSize({eventKey:e,fileName:a.provision})}},{key:"uploadProtocolFile",value:function(e,t){return this._uploadFile(e,t,a.protocol)}},{key:"deleteProtocolFile",value:function(e){return this._deleteFile(e,a.protocol)}},{key:"getProtocolFileUrl",value:function(e){return this._getUrl(e,a.protocol)}},{key:"getProtocolFileName",value:function(e){return this._getFileName({eventKey:e,fileName:a.protocol})}},{key:"getProtocolFileSize",value:function(e){return this._getFileSize({eventKey:e,fileName:a.protocol})}},{key:"_getFileRef",value:function(e,t){return this.storageRef.child(""+t+e)}},{key:"_uploadFile",value:function(e,t,n){var i=this._getFileRef(e,n).put(t);return new Promise(function(e,t){i.on("state_changed",function(){},t,function(){return e(i.snapshot.downloadURL)})})}},{key:"_deleteFile",value:function(e,t){return this._getFileRef(e,t).delete().catch(function(e){if("storage/object-not-found"!==e.code)throw Error(e)})}},{key:"_getUrl",value:function(e,t){return this._getFileRef(e,t).getDownloadURL().then(function(e){return e}).catch(function(e){if("storage/object-not-found"===e.code)return null;throw Error(e)})}},{key:"_getFileName",value:function(e){return this._getFileMetadata(e).then(function(e){return e?e.name:null})}},{key:"_getFileSize",value:function(e){return this._getFileMetadata(e).then(function(e){return e?e.size:null})}},{key:"_getFileMetadata",value:function(e){var t=e.eventKey,n=e.fileName;return this._getFileRef(t,n).getMetadata().catch(function(e){if("storage/object-not-found"===e.code)return null;throw Error(e)})}}]),e}();t.a=s},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(493);t.a=r.a.module("app.services.fileStorage",[]).service("FileStorageService",a.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e)}return r(e,[{key:"getFirebase",value:function(){return window.firebase}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(495);t.a=r.a.module("app.firebaseService",[]).service("FirebaseService",a.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t,n,r){"ngInject";i(this,e);var a=t.getFirebase();this.ref=a.database().ref("news"),this.$firebaseArray=n,this.$firebaseObject=r}return e.$inject=["FirebaseService","$firebaseArray","$firebaseObject"],a(e,[{key:"loadNews",value:function(e){var t=this,n=e?this._getRefByOptions(e):this.ref;return this.$firebaseArray(n.orderByChild("createTimestamp")).$loaded().then(function(e){return e.map(function(e){return t._mapNews(e)}).reverse()})}},{key:"_getRefByOptions",value:function(e){var t=e.dateBegin,n=e.dateEnd,i=e.limitToLast,r=this.ref;return t&&(r=r.startAt(t)),n&&(r=r.endAt(n)),i&&(r=r.limitToLast(i)),r}},{key:"getNewsById",value:function(e){var t=this;return this._getNewsObj(e).$loaded().then(function(e){return t._mapNews(e)})}},{key:"_getNewsObj",value:function(e){var t=this.ref.child(e);return this.$firebaseObject(t)}},{key:"_mapNews",value:function(e){var t=e.title,n=e.abstract,i=e.content,r=e.createTimestamp;return{id:e.$id,date:r,title:t,abstract:n,content:i}}},{key:"addNews",value:function(e){return this.$firebaseArray(this.ref).$add(r({},e,{createTimestamp:Date.now()})).then(function(e){return e.key})}},{key:"saveNews",value:function(e,t){var n=this._getNewsObj(e);return n.$loaded().then(function(e){return Object.assign(e,t,{editTimestamp:Date.now()}),n.$save()}).then(function(e){return e.key})}},{key:"removeNews",value:function(e){return this._getNewsObj(e).$remove()}}]),e}();t.a=s},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(497);t.a=r.a.module("app.services.news",[]).service("NewsService",a.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,r){"ngInject";i(this,e);var a=t.getFirebase();this.startlist=a.database().ref("startlist"),this.$firebaseArray=n,this.$firebaseObject=r}return e.$inject=["FirebaseService","$firebaseArray","$firebaseObject"],r(e,[{key:"getStartlist",value:function(e){var t=this.startlist.child(e);return this.$firebaseArray(t)}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(499);t.a=r.a.module("app.services.startlistService",[]).service("StartlistService",a.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n){"ngInject";i(this,e);var r=t.getFirebase();this.ref=r.database().ref("updates"),this.$firebaseArray=n}return e.$inject=["FirebaseService","$firebaseArray"],r(e,[{key:"loadUpdates",value:function(e){var t=e?this._getRefByOptions(e):this.ref;return this.$firebaseArray(t).$loaded()}},{key:"_getRefByOptions",value:function(e){var t=e.dateBegin,n=e.dateEnd,i=e.limitToLast,r=this.ref;return t&&(r=r.startAt(t)),n&&(r=r.endAt(n)),i&&(r=r.limitToLast(i)),r}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(501);t.a=r.a.module("app.services.update",[]).service("UpdateService",a.a)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t,n,r){"ngInject";i(this,e),this.$q=t,this.AuthService=n,this.UserRulesServiceConstants=r}return e.$inject=["$q","AuthService","UserRulesServiceConstants"],r(e,[{key:"getRules",value:function(e){return{read:!0,write:this._isAdmin(e)}}},{key:"requireWriteRules",value:function(){var e=this;return this.AuthService.requireSignIn().then(function(t){return e.$q(function(n,i){e._isAdmin(t.uid)?n():i()})})}},{key:"_isAdmin",value:function(e){return this.UserRulesServiceConstants.adminUID===e}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(503);t.a=r.a.module("app.services.userrules",[]).service("UserRulesService",a.a).constant("UserRulesServiceConstants",{adminUID:"GHL9MKZQRBeSHObFCUt76xPrUM63"})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(t){"ngInject";i(this,e),this.$q=t,this.ownerId="-53351722"}return e.$inject=["$q"],r(e,[{key:"initWidgetsComments",value:function(e){var t=e.elementId,n=e.pageUrl,i=e.pageId;this._getVK().Widgets.Comments(t,{redesign:1,limit:10,attach:"*",pageUrl:n},i)}},{key:"getPhotoGallery",value:function(e){var t=this,n=e.albumId;return this.$q(function(e){t._getVK().api("photos.get",{owner_id:t.ownerId,album_id:n,v:"5.53",photo_sizes:0,extended:0},function(t){e(t.response)})})}},{key:"_getVK",value:function(){return window.VK}}]),e}();t.a=a},function(e,t,n){"use strict";var i=n(1),r=n.n(i),a=n(505);t.a=r.a.module("app.services.vk",[]).service("VKService",a.a).name}]),[486]);